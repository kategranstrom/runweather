(this.webpackJsonprunweather=this.webpackJsonprunweather||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(23)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),s=(a(18),a(2)),i=a(3),c=a(1),u=a(4),d=a(5),h=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getDateString",value:function(e){var t=new Date(e);return t.toLocaleString("default",{month:"short"})+" "+t.getDate()}},{key:"render",value:function(){var e=this.props.run;return r.a.createElement("div",null,r.a.createElement("div",{className:"weather"},e.temperature,"\xb0C"),r.a.createElement("div",{className:"date"},this.getDateString(e.date)),r.a.createElement("div",{className:"description"},e.topLayer," headband shorts"))}}]),a}(r.a.Component),m=a(6),p=(a(19),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={sideBarOpen:!1,newExtra:""},n.handleToggleSidebar=n.handleToggleSidebar.bind(Object(c.a)(n)),n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.addExtra=n.addExtra.bind(Object(c.a)(n)),n.deleteExtra=n.deleteExtra.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"handleToggleSidebar",value:function(){this.setState({sideBarOpen:!this.state.sideBarOpen})}},{key:"handleChange",value:function(e){this.setState({newExtra:e.target.value})}},{key:"addExtra",value:function(e){if(e.preventDefault(),""!==this.state.newExtra){var t=this.props.extras;t.push(this.state.newExtra),this.setState({newExtra:""}),this.props.onChangeExtras(t)}}},{key:"deleteExtra",value:function(e){var t=this.props.extras;t.splice(t.indexOf(e),1),this.props.onChangeExtras(t)}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"check"},r.a.createElement(m.b,null)),a=r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"listitem"},"Sort By"),r.a.createElement("div",{className:"subsortby",onClick:function(){return e.props.onChangeSortBy("date")}},"date"===this.props.sortBy?t:r.a.createElement("div",{className:"spacer"}),"Date"),r.a.createElement("div",{className:"subsortby",onClick:function(){return e.props.onChangeSortBy("temperature")}},"temperature"===this.props.sortBy?t:r.a.createElement("div",{className:"spacer"}),"Temperature"),r.a.createElement("div",{className:"subsortby",onClick:function(){return e.props.onChangeSortBy("mostrelevant")}},"mostrelevant"===this.props.sortBy?t:r.a.createElement("div",{className:"spacer"}),"Most Relevant"),r.a.createElement("div",{className:"listitem"},"Also Track"),this.props.extras.map((function(t,a){return r.a.createElement("div",{className:"subalsotrack",key:a},t,r.a.createElement("div",{className:"righticon",onClick:function(){return e.deleteExtra(t)}}," ",r.a.createElement(m.d,null)," "))})),r.a.createElement("form",{onSubmit:this.addExtra},r.a.createElement("div",{className:"lefticon",onClick:this.addExtra}," ",r.a.createElement(m.a,null)," "),r.a.createElement("input",{type:"text",value:this.state.newExtra,onChange:this.handleChange,placeholder:"Add new...",className:"subalsotrack"})));return r.a.createElement("div",null,r.a.createElement("div",{className:"menuicon",onClick:this.handleToggleSidebar},r.a.createElement(m.c,null)),this.state.sideBarOpen?a:r.a.createElement("div",null))}}]),a}(r.a.Component)),b=a(8),f=a(7),v=function(){return fetch("https://api.openweathermap.org/data/2.5/weather?q=Revelstoke&appid=cfa60c427275f8728cc2d1a469c4edb2").then((function(e){return e.json()}))},E=(a(20),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.show?r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement("div",{className:"content"},this.props.children))):null}}]),a}(r.a.Component)),y=(a(11),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"pad",value:function(e){return e<10?"0"+e:e}},{key:"getDate",value:function(){var e=new Date,t=this.pad(e.getMonth()+1),a=this.pad(e.getDate());return e.getFullYear()+"-"+t+"-"+a}},{key:"getTemperature",value:function(){return Math.round(100*(this.props.currWeather.main.temp-273.15))/100}},{key:"getFeelsLike",value:function(){return Math.round(100*(this.props.currWeather.main.feels_like-273.15))/100}},{key:"getHumidity",value:function(){return this.props.currWeather.main.humidity}},{key:"getWindSpeed",value:function(){return 3.6*this.props.currWeather.wind.speed}},{key:"getDescrption",value:function(){return this.props.currWeather.weather[0].description}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.props.onSubmit},r.a.createElement("label",{htmlFor:"temperature"},"Temperature (\xb0C) "),r.a.createElement("input",{type:"number",defaultValue:this.getTemperature(),id:"temperature",name:"temperature"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"feelsLike"},"Feels Like (\xb0C) "),r.a.createElement("input",{type:"number",defaultValue:this.getFeelsLike(),id:"feelsLike",name:"feelsLike"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"humidity"},"Humidity (%)"),r.a.createElement("input",{type:"number",defaultValue:this.getHumidity(),id:"humidity",name:"humidity"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"windSpeed"},"Wind Speed (km/h)"),r.a.createElement("input",{type:"number",defaultValue:this.getWindSpeed(),id:"windSpeed",name:"windSpeed"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",defaultValue:this.getDescrption(),id:"description",name:"description"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"topLayer"},"Top Layer"),r.a.createElement("input",{type:"text",id:"topLayer",name:"topLayer"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"bottomLayer"},"Bottom Layer"),r.a.createElement("input",{type:"text",id:"bottomLayer",name:"bottomLayer"}),r.a.createElement("br",null),this.props.extras.map((function(e,t){return r.a.createElement("div",{className:"inline",key:t},r.a.createElement("label",{htmlFor:e},e),r.a.createElement("input",{type:"checkbox",id:e,value:e,name:"extras"}))})),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"notes"},"Notes"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"notes",name:"notes",rows:"2",cols:"30"}),r.a.createElement("br",null),r.a.createElement("button",{className:"action",onClick:this.props.onCancel},"Cancel"),r.a.createElement("input",{type:"submit",className:"action",name:"submit",value:"Add"}))}}]),a}(r.a.Component)),g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={currWeather:null},n.getCurrWeather=n.getCurrWeather.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCurrWeather()}},{key:"getCurrWeather",value:function(){v().then(function(e){console.log(e),this.setState({currWeather:e})}.bind(this))}},{key:"saveWorkout",value:function(e){fetch("http://localhost:8000/api/workout/",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:e,mode:"no-cors"}).then((function(e){console.log("Request succeeded with JSON response",e)})).catch((function(e){console.log("Request failed",e)}))}},{key:"handleSubmit",value:function(e){var t=new FormData(e.target);t.append("userId",1),t.append("date",Date.now());var a=t.getAll("extras");t.set("extras",JSON.stringify(a));var n,r="",l=Object(f.a)(t.entries());try{for(l.s();!(n=l.n()).done;){var o=Object(b.a)(n.value,2),s=o[0],i=o[1];console.error(s,i),r+=s+"="+i+"&"}}catch(c){l.e(c)}finally{l.f()}r=r.slice(0,-1),this.saveWorkout(r),e.preventDefault(),this.props.update()}},{key:"render",value:function(){return r.a.createElement(E,{show:this.props.showAddRun},r.a.createElement("h2",null,"Add Run"),r.a.createElement(y,{onSubmit:this.handleSubmit,onCancel:this.props.onCancel,currWeather:this.state.currWeather,extras:this.props.extras}))}}]),a}(r.a.Component),k=(a(21),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showAddRun:!1},n.toggleAddRun=n.toggleAddRun.bind(Object(c.a)(n)),n.update=n.update.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"toggleAddRun",value:function(e){this.setState({showAddRun:!this.state.showAddRun})}},{key:"update",value:function(){this.toggleAddRun(),this.props.update()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navitem",onClick:this.toggleAddRun},r.a.createElement("div",{className:"navicon"}," ",r.a.createElement(m.a,null)," "),"Add Run")),r.a.createElement(g,{showAddRun:this.state.showAddRun,onCancel:this.toggleAddRun,update:this.update,extras:this.props.extras}))}}]),a}(r.a.Component)),O=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getDateString",value:function(e){var t=new Date(e);return t.toLocaleString("default",{month:"short"})+" "+t.getDate()}},{key:"render",value:function(){var e=this.props.run||{},t=JSON.parse(e.extras)||[],a=this.props.extras.filter((function(e){return!t.includes(e)}));return console.error("run",e),r.a.createElement("div",null,r.a.createElement("div",{className:"date"},this.getDateString(e.date)),r.a.createElement("div",{className:"weather"},"Temp: ",e.temperature," Feels like: ",e.feelsLike," Humidity: ",e.humidity),r.a.createElement("form",{onSubmit:this.props.onSubmit},r.a.createElement("label",{htmlFor:"topLayer"},"Top Layer"),r.a.createElement("input",{type:"text",defaultValue:e.topLayer,id:"topLayer",name:"topLayer"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"bottomLayer"},"Bottom Layer"),r.a.createElement("input",{type:"text",defaultValue:e.bottomLayer,id:"bottomLayer",name:"bottomLayer"}),r.a.createElement("br",null),t.map((function(e,t){return r.a.createElement("div",{className:"inline",key:t},r.a.createElement("label",{htmlFor:e},e),r.a.createElement("input",{type:"checkbox",id:e,value:e,name:"extras",defaultChecked:!0}))})),a.map((function(e,t){return r.a.createElement("div",{className:"inline",key:t},r.a.createElement("label",{htmlFor:e},e),r.a.createElement("input",{type:"checkbox",id:e,value:e,name:"extras"}))})),a.length||t.length?r.a.createElement("br",null):r.a.createElement("div",null),r.a.createElement("label",{htmlFor:"notes"},"Notes"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"notes",defaultValue:e.notes,name:"notes",rows:"2",cols:"30"}),r.a.createElement("br",null),r.a.createElement("button",{className:"action",onClick:this.props.onDelete},"Delete"),r.a.createElement("input",{type:"submit",className:"action",name:"submit",value:"Save"})))}}]),a}(r.a.Component),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleUpdateRun=n.handleUpdateRun.bind(Object(c.a)(n)),n.handleDeleteRun=n.handleDeleteRun.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"updateWorkout",value:function(e,t){fetch("http://localhost:8000/api/updateworkout/"+e,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:t,mode:"no-cors"}).then((function(e){console.log("Request succeeded with JSON response",e)})).catch((function(e){console.log("Request failed",e)}))}},{key:"deleteWorkout",value:function(e){fetch("http://localhost:8000/api/workout/delete/"+e).then((function(e){console.log("Request succeeded with JSON response",e)})).catch((function(e){console.log("Request failed",e)}))}},{key:"handleUpdateRun",value:function(e){var t=new FormData(e.target),a=t.getAll("extras");t.set("extras",JSON.stringify(a));var n,r=this.props.run,l="userId="+r.userId+"&date="+r.date+"&temperature="+r.temperature+"&",o=Object(f.a)(t.entries());try{for(o.s();!(n=o.n()).done;){var s=Object(b.a)(n.value,2);l+=s[0]+"="+s[1]+"&"}}catch(i){o.e(i)}finally{o.f()}l=l.slice(0,-1),this.updateWorkout(r.id,l),e.preventDefault(),this.props.update()}},{key:"handleDeleteRun",value:function(e){this.deleteWorkout(this.props.run.id),this.props.update()}},{key:"render",value:function(){var e=!!this.props.run;return r.a.createElement(E,{show:e},r.a.createElement(O,{run:this.props.run,extras:this.props.extras,onSubmit:this.handleUpdateRun,onDelete:this.handleDeleteRun}))}}]),a}(r.a.Component),w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,runs:[],sortBy:"date",extras:["Gloves","Headband","Running Hat"],editingRun:null},n.getWorkouts=n.getWorkouts.bind(Object(c.a)(n)),n.handleDelete=n.handleDelete.bind(Object(c.a)(n)),n.changeSortBy=n.changeSortBy.bind(Object(c.a)(n)),n.changeExtras=n.changeExtras.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getWorkouts()}},{key:"fetchWorkouts",value:function(){return fetch("http://localhost:8000/api/workouts").then((function(e){if(200===e.status)return e.json().then((function(e){return e}));console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){console.log("Fetch Error :-S",e)}))}},{key:"getWorkouts",value:function(){this.fetchWorkouts().then(function(e){var t=e.data||[];this.sortRuns(t).then(function(e){this.setState({loading:!1,runs:e})}.bind(this))}.bind(this))}},{key:"sortRuns",value:function(e){var t=this;return"mostrelevant"===this.state.sortBy?v().then((function(t){var a=100*(t.main.feels_like-273.15)/100;return e.sort((function(e,t){return Math.abs(e.feelsLike-a)-Math.abs(t.feelsLike-a)}))})):Promise.resolve(e.sort((function(e,a){return a[t.state.sortBy]-e[t.state.sortBy]})))}},{key:"handleEditRun",value:function(e){this.setState({editingRun:e})}},{key:"handleDelete",value:function(){this.setState({editingRun:null}),this.getWorkouts()}},{key:"changeSortBy",value:function(e){this.setState({sortBy:e}),this.getWorkouts()}},{key:"changeExtras",value:function(e){this.setState({extras:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("header",{className:"App-header"},r.a.createElement(p,{sortBy:this.state.sortBy,onChangeSortBy:this.changeSortBy,extras:this.state.extras,onChangeExtras:this.changeExtras}),r.a.createElement("h1",null,"Runs")),r.a.createElement("div",{className:"content-wrapper"},this.state.runs.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"card",onClick:function(a){return e.handleEditRun(t)}},r.a.createElement(h,{run:t})),r.a.createElement("br",null))}))),r.a.createElement(x,{run:this.state.editingRun,extras:this.state.extras,update:this.handleDelete}),r.a.createElement(k,{update:this.getWorkouts,extras:this.state.extras}))}}]),a}(r.a.Component);a(22);var S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.00cb1968.chunk.js.map